<?php/** * @package Anta_Ui_Item */ /** * prepare and visualize a single document in a document list */ class Anta_Ui_Item_Document extends Ui_Crafts_Item{	/**	 * the bound Application_Model_Entity instance to be displayed */	public $document;		/**	 * Class constructor	 */	public function __construct( Application_Model_Document $document ){		$this->document = $document;		parent::__construct( $document->id );	}		public function __toString(){				$tags = "";		// load tags		foreach( array_keys( $this->document->tags ) as $k ){						$tags .= '<span  class="is-untouchable-tag" id="'.$this->document->id.'_tag_'.$this->document->tags[ $k ]->id.'"><a class="tip-helper" title="'.I18n_Json::get('use tag')			." __b_".$this->document->tags[ $k ]->content."_b__ (". $this->document->tags[ $k ]->category .") ".			I18n_Json::get('to filter selection').'" href="?'.				Dnst_Filter::prependProperties( array( "tags"=>array($this->document->tags[ $k ]->id), "offset"=>0 ) ).					'">'.$this->document->tags[ $k ]->content.'</a><img class="tag-icon tip-helper detach-tag"  src="'.Anta_Core::getBase().'/images/cross-small-grey.png" title="'.I18n_Json::get('remove tag permanently').'"></span>';		}				return '		<div class="grid_24 alpha omega item" id="doc_'.$this->document->cryptoId.'">		  <div class="grid_1 alpha centered" ><input type="checkbox" class="multi-selectable" id="sedo_'.$this->document->cryptoId.'"  style="margin-left: 5px"></div>		  <div class="grid_1 " id="mido_'.$this->document->cryptoId.'">'.basename( $this->document->mimeType).'</div>		  <div class="grid_2" id="lado_'.$this->document->cryptoId.'">'.I18n_Json::get( $this->document->language ).'</div>		  <div class="grid_2"><a href="?'.Dnst_Filter::prependProperties( array("date_start"=>str_replace("/",".",$this->document->date) ,"offset"=>0 ) ).'">'.$this->document->date.'</a></div>		  <div class="grid_15 item-title '.($identity->id != $this->document->owner->id? 'admin':'').'">			<a href="'.Anta_Core::getBase().'/edit/props/document/'.$this->document->cryptoId.'/user/'.$this->document->owner->cryptoId.'" title="view and modify file">'.				wordwrap( $this->document->title, 30, " ", true ).'</a>			<p><span class="document-tags">'.$tags.'<span class="is-untouchable-tag tip-helper attach-tag" title="'.I18n_Json::get( 'attach tag' ).'">+</span></span></p>		  </div>		   <div class="grid_1 " ><img id="igdo_'.$this->document->cryptoId.'" src="'.Anta_Core::getBase().'/images/'.($this->document->ignore==0? 'tick.png': 'block.png').'"></div>		  		  		  <div class="grid_1 omega document-status" id="'.$this->document->cryptoId.'">'.$this->document->status.'</div>		  <!--<div class="grid_1 omega"><a href="'.Anta_Core::getBase().'/documents/remove/user/'.$this->document->owner->cryptoId.'/doc/'.$this->document->cryptoId.'"><img src="'.Anta_Core::getBase().'/images/cross-small.png"/></a></div>-->		</div>'; 			} }?>