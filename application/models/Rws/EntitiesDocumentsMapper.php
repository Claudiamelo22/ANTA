<?phpclass Application_Model_Rws_EntitiesDocumentsMapper{	public static function install( $username ){			$stmt = Anta_Core::mysqli()->query( 			"CREATE TABLE IF NOT EXISTS anta_".$username.".`rws_entities_documents` (				`id_rws_entity` int(11) NOT NULL,				`id_document` int(11) NOT NULL,				`relevance` float NOT NULL COMMENT 'the relevance score for the relationship entity-document',				`frequency` int(11) NOT NULL DEFAULT '0' COMMENT 'number of such entities found into doc',  				UNIQUE KEY `id_rws_entity` (`id_rws_entity`,`id_document`),				FOREIGN KEY ( `id_rws_entity` ) REFERENCES anta_".$username.".`rws_entities`( id_rws_entity )                      ON DELETE CASCADE,				FOREIGN KEY ( `id_document` ) REFERENCES anta_".$username.".`documents`( id_document )                      ON DELETE CASCADE	  			) ENGINE=INNODB"        );			}		public static function modify( Application_Model_User $antaUser, $idEntity, $idDocument, $relevance,  $frequency ){				$stmt = Anta_Core::mysqli()->query( "			UPDATE anta_".$antaUser->username.".`rws_entities_documents` SET relevance = ?, frequency = ? WHERE id_rws_entity = ? AND id_document = ?",			array( $relevance,  $frequency, $idEntity, $idDocument )		);				return $stmt->rowCount();			}		public static function add( Application_Model_User $antaUser, $idEntity, $idDocument, $relevance, $frequency ){				$stmt = Anta_Core::mysqli()->query( 			"INSERT IGNORE INTO anta_".$antaUser->username.".`rws_entities_documents` (				`id_rws_entity`, `id_document`,`relevance`, `frequency`			) VALUES (				?, ?, ?, ?			)", array( $idEntity, $idDocument, $relevance, $frequency )		);				$added = $stmt->rowCount();				if( $added == 0 ){			self::modify( $antaUser, $idEntity, $idDocument, $relevance, $frequency );		}				return $stmt->rowCount();	}		public static function remove( Application_Model_User $antaUser, $idEntity, $idDocument ){				$stmt = Anta_Core::mysqli()->query( 			"DELETE FROM anta_".$antaUser->username.".`rws_entities_documents` WHERE id_rws_entity = ? AND id_document = ?",			array(				$idEntity, $idDocument			)		);				return $stmt->rowCount();	}	}?>